---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

type Props = {
	post: CollectionEntry<"post">;
	withDesc?: boolean;
};


const { post, withDesc = false } = Astro.props;
const defaultImageSrc = import.meta.env.BASE_URL + 'social-card.webp'; 
const defaultImageWidth = 380; // Specify the width of the default image
const defaultImageHeight = 630; // Specify the height of the default image
---

<div class="post-card1" transition:animate="slide">
	<a href={`/posts/${post.slug}/`} class="cactus-link" rel="prefetch">
		<!-- Check if coverImage exists and is an object -->
		{post.data.coverImage && typeof post.data.coverImage === "object" ? (
			<Image
				src={post.data.coverImage.src}
				alt={post.data.coverImage.alt}
				class="object-cover"
				loading="eager"
				fetchpriority="high"
			/>
		) : post.data.coverImage && typeof post.data.coverImage === "string" ? (
		<Image
				src={defaultImageSrc}
				alt="Default cover"
				class="object-cover"
				loading="eager"
				fetchpriority="high"
				width={defaultImageWidth}
				height={defaultImageHeight}
			/>
		) : (
		<Image
				src={defaultImageSrc}
				alt="Default cover"
				class="object-cover"
				loading="eager"
				fetchpriority="high"
				width={defaultImageWidth}
				height={defaultImageHeight}
			/>

		)}
		<div
			class="panel"
			style={{
				display: "flex",
				justifyContent: "space-between",
				rowGap: "0",
				columnGap: "0.4vw",
				textAlign: "center",
				flexDirection: "column",
				padding: "1vh 1vw",
				fontSize: "clamp(1rem, 1rem, 1rem)",
			}}
		>
			<h2 class="title" style={{ color: "", fontSize: "" }}>
				{post.data.title}
			</h2>

			{withDesc && (
				<div
					class="line-clamp-1 block snippet"
					style={{ display: "none" }}
				>
					{post.data.description}
				</div>
			)}
		</div>
	</a>
</div>
